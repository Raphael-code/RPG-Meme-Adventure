import pygame, sys
from config import *
from config2 import *
from sprite import *
frmo sprite2 import *
from random import *
import time
#charge l'ecran
ecran=pygame.display.set_mode((1200,600))

#initialisation de la boucle
clock=pygame.time.Clock()
running=True
while running:
    clock.tick(fps)

    #dans le menu
    if Mode_Jeux=="Menu":
        ecran.blit(background_1,(0,0))
        #affiche les boutons des modes de jeux dans le menu dans le menu
        if Bouton_Histoire.draw(win):
            Mode_Jeux='Histoire'
        if Bouton_Duels.draw(win):
            Mode_Jeux='Duels'
        if Bouton_Boss.draw(win):
            Mode_Jeux='Boss'
        if Bouton_Parametre.draw(win):
            Mode_Jeux='Paramètre'

    elif Mode_Jeux=="Histoire": #dans le mode histoire
        ecran.blit(background_2,(0,0))

    elif Mode_Jeux=="Duels": #dans le mode duels
        ecran.blit(background_2,(0,0))

    elif Mode_Jeux=="Boss": #dans le mode Boss
        ecran.blit(background_2,(0,0))
        for Atk_boss in AllAttaqueBoss:
        #si l'attaque ennemie touche le boss ou un tonneau
            if (Atk_boss.rect.y < boss.hitbox[1] + boss.hitbox[3] and Atk_boss.rect.y + 16 > boss.hitbox[1] and Atk_boss.rect.x + 16 > boss.hitbox[0] and Atk_boss.rect.x < boss.hitbox[0] + boss.hitbox[2]):
                Atk_boss.rebond() #l'attaque rebondit
            if (Atk_boss.rect.y < Objet_tonneau.hitbox[1] + Objet_tonneau.hitbox[3] and Atk_boss.rect.y + 16 > Objet_tonneau.hitbox[1] and Atk_boss.rect.x + 16 > Objet_tonneau.hitbox[0] and Atk_boss.rect.x < Objet_tonneau.hitbox[0] + Objet_tonneau.hitbox[2]):
                Atk_boss.rebond()
                Objet_tonneau.hit() #le tonneau prend des dgt
            Atk_boss.draw(win)
        boss.draw(win)
        Objet_tonneau.draw(win)

        if boss.boss_mort():
            time.sleep(3)
            Mode_Jeux="Menu"      #retour au menu


    elif Mode_Jeux=="Paramètre": #dans les paramètres
        ecran.blit(background_2,(0,0))


    pygame.display.flip() #actualise la page

    for event in pygame.event.get():

        if event.type==pygame.QUIT:    #si on ferme le jeu
            running=False
            pygame.quit()
            print("fermeture du jeu")
